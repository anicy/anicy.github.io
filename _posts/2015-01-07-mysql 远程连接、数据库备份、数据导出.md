---
title: mysql 远程连接、数据库备份、数据导出
description happy wife, happy life ...
keywords: mysql
category: Note
tags: mysql
---


{% include JB/setup %}
###mysql 远程连接、数据库备份、数据导出

```
GRANT ALL PRIVILEGES ON *.* TO 'hello'@'%' IDENTIFIED BY 'hello123' WITH GRANT OPTION;
```

```
mysql -h server_ip  -u hello -p  hello123
```
error
```
ERROR 2003 (HY000): Can't connect to MySQL server on '192.168.1.3' (111)  
```

update my.cnf
```
whereis mysql
## promote
spark@spark-desktop:~$ whereis mysql
mysql: /usr/bin/mysql /etc/mysql /usr/lib/mysql /usr/bin/X11/mysql /usr/include/mysql /usr/share/mysql /usr/share/man/man1/mysql.1.gz
spark@spark-desktop:~$ 
```
```
# find the file of my.conf and update it 
注释掉这一行，实现全局监听
#bind-address           = 127.0.0.1
```
restar mysql 
```
sudo /etc/init.d／mysql restart
```

```授权
grant all privileges on *.* to 'car'@'%' identified by 'car123456';
```
done,good job.

###mysqldump

```
1.导出整个数据库
 mysqldump -u 用户名 -p 数据库名 > 导出的文件名    
 mysqldump -u wcnc -p smgp_apps_wcnc > wcnc.sql
2.导出一个表
 mysqldump -u 用户名 -p 数据库名 表名> 导出的文件名
 mysqldump -u wcnc -p smgp_apps_wcnc users> wcnc_users.sql
3.导出一个数据库结构
  mysqldump -u wcnc -p -d --add-drop-table smgp_apps_wcnc >d:\wcnc_db.sql
 -d 没有数据 --add-drop-table 在每个create语句之前增加一个drop table 
4.导入数据库
  常用source 命令
  进入mysql数据库控制台，
  如mysql -u root -p 
```

###mysql load file
```
load  data local infile '/home/scut1/data/xx.txt'   into table yourtablename
fields terminated by '\t' lines terminated by '\n' 

select * from A into outfile '/home/scut1/data/xx.txt' fields 
terminated by '\t' lines terminated by '\n'
```

###ps
今天在测试导入数据的时候，发现一点问题。提示：ERROR 1148 (42000): The used command is not allowed with this MySQL version原因是；如果编译安装mysql时没有指定–enable-local-infile，那么在使用上述命令时会报以上的错误.
使用apt-get 安装的mysql,不想自己重新编译。那么可以通过使用指定命令的方式进行执行数据的导入操作。

```
 mysql -u root -p  mydb_name --local-infile=1 -e　'load data local infile "/tmp/t.csv"  into table u_table fields terminated by "," lines terminated by "\n"'
```



ok done!

###编码坑货
```
CREATE DATABASE IF NOT EXISTS fun DEFAULT CHARSET utf8 COLLATE utf8_general_ci;
```

```
create table huoche(
    id varchar(18) primary key,
    name varchar(20),
    tel varchar(15),
    mail varchar(50),
    uname varchar(20),
    pwd varchar(20)
)
```
```
mysql -u root -p fun --local-infile=1 -e 'load data local infile "/tmp/t.csv"  into table huoche fields terminated by "," lines terminated by "\n"'
```
ps:每次复制执行的时候总会报错，手动打一次正常，逗我玩吗？　可能中间有某些分割符号隐藏了。。。
至此，导入中文，还有小秘密哦。。。哈哈

